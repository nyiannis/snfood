(function(b){"use strict";var v=v||{};v.init=function(){v.$body=b(document.body),v.$window=b(window),v.$header=b("#site-header");this.catalogBanner();this.catalogToolBarV1();this.catalogToolBarV2();this.catalogToolBarV3();this.productsTools();this.productCategoriesCarousel();this.catalogCollapseWidget();this.productsLoading();this.productsInfinite();this.productsFilterActivated();this.scrollFilterSidebar();this.changeCatalogElementsFiltered();this.stickySidebar()};v.catalogBanner=function(){var e=b("#catalog-header-banners");if(e.length<1){return}e.append('<div class="swiper-pagination"></div>');var t={loop:false,watchOverflow:true,pagination:{el:"#catalog-header-banners .swiper-pagination",type:"bullets",clickable:true}};new Swiper("#catalog-header-banners",t)};v.productCategoriesCarousel=function(){var e=b("#rz-catalog-top-categories"),t=e.find(".swiper-container"),i=e.data("columns");if(e.length<1){return}t.after('<div class="swiper-pagination"></div>');t.after('<span class="razzi-svg-icon razzi-top-cats-button-prev rz-swiper-button"><svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg></span>');t.after('<span class="razzi-svg-icon razzi-top-cats-button-next rz-swiper-button"><svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg></span>');var o={loop:false,spaceBetween:30,watchOverflow:true,on:{init:function(){this.$el.css("opacity",1)}},navigation:{nextEl:".razzi-top-cats-button-next",prevEl:".razzi-top-cats-button-prev"},pagination:{el:"#rz-catalog-top-categories .swiper-pagination",type:"bullets",clickable:true},breakpoints:{300:{slidesPerView:2,slidesPerGroup:2,spaceBetween:20},500:{slidesPerView:3,slidesPerGroup:3,spaceBetween:20},768:{slidesPerView:i>4?4:i,slidesPerGroup:i>4?4:i},1200:{slidesPerView:i>5?5:i,slidesPerGroup:i>5?5:i},1366:{slidesPerView:i>6?6:i,slidesPerGroup:i>6?6:i}}};new Swiper("#rz-catalog-top-categories .swiper-container",o);if(e.find(".rz-swiper-button").hasClass("swiper-button-lock")){e.addClass("rz-not-navigation")}};v.productsTools=function(){b(document.body).on("click",'.catalog-toolbar .toggle-filters[data-toggle="dropdown"]',function(e){e.preventDefault();var t=b(this).closest(".catalog-toolbar");if(t.hasClass("on-mobile")){return}b(b(this).attr("href")).slideToggle(300,function(){b(this).toggleClass("open")})})};v.catalogToolBarV1=function(){var e=b(".razzi-catalog-page").find("#primary-sidebar");if(e.length<1){return}v.$window.on("resize",function(){if(v.$window.width()>991){if(e.hasClass("rz-modal")){e.removeClass("rz-modal").removeAttr("style");v.$body.removeClass("modal-opened");v.$body.removeClass("primary-sidebar-opened");e.find(".modal-content").removeClass("razzi-scrollbar")}}else{e.addClass("rz-modal");e.find(".modal-content").addClass("razzi-scrollbar")}}).trigger("resize")};v.catalogCollapseWidget=function(){if(typeof razziCatalogData.catalog_widget_collapse_content==="undefined"){return}if(razziCatalogData.catalog_widget_collapse_content!=="1"){return}v.collapseWidget(b("#primary-sidebar, .elementor-widget-wp-widget-razzi-products-filter"))};v.catalogToolBarV3=function(){if(typeof razziCatalogData.catalog_filters_sidebar_collapse_content!=="undefined"&&razziCatalogData.catalog_filters_sidebar_collapse_content==="1"){v.collapseWidget(b("#catalog-filters-modal"))}this.showFilterMobile()};v.collapseWidget=function(e){e.on("click",".widget-title",function(e){e.preventDefault();var t=b(this),i=t.closest(".widget");if(t.closest(".widget").hasClass(".products-filter-widget")){return}i.find(".widget-content").slideToggle();t.toggleClass("rz-active")});e.on("click",".products-filter__filter-name",function(e){e.preventDefault();b(this).next().slideToggle();b(this).closest(".products-filter__filter").toggleClass("rz-active")})};v.catalogToolBarV2=function(){var t=b("#catalog-filters");if(t.length<1){return}if(!t.hasClass("catalog-toolbar-filters__v2")){return}var a="fade";v.$window.on("resize",function(){if(v.$window.width()<992){a="slide"}else{a="fade"}}).trigger("resize");t.find(".widget").on("click",".widget-title",function(e){e.preventDefault();var t=b(this),i=t.closest(".widget"),o=i.siblings().find(".widget-title");if(a==="fade"){t.next().fadeToggle("fast");o.next().hide()}else{o.next().slideUp(200);setTimeout(function(){t.next().slideToggle(200)},200)}t.toggleClass("rz-active");o.removeClass("rz-active")});b(".catalog-toolbar").on("click",".products-filter__filter-name",function(e){e.preventDefault();var t=b(this),i=t.closest(".products-filter__filter"),o=i.siblings().find(".products-filter__filter-name");if(a==="fade"){t.next().fadeToggle("fast");o.next().hide()}else{o.next().slideUp(200);setTimeout(function(){t.next().slideToggle(200)},200)}t.toggleClass("rz-active");o.removeClass("rz-active")});v.$body.on("razzi_products_filter_before_send_request",function(){t.find(".products-filter-widget .products-filter__filter-control").hide();t.find(".products-filter-widget .products-filter__filter-name").removeClass("rz-active")});v.$body.on("click",function(e){if(e.target.id=="catalog-filters"){return}if(b(e.target).closest(".catalog-toolbar-filters__v2 .widget").length>0){return}t.find(".widget .widget-title").next().hide();t.find(".widget .widget-title").removeClass("rz-active");t.find(".products-filter-widget .products-filter__filter-control").hide();t.find(".products-filter-widget .products-filter__filter-name").removeClass("rz-active")})};v.showFilterMobile=function(){var e=b(".catalog-toolbar"),i=b(".products-filter-dropdown");if(!e.hasClass("layout-v3")){return}v.$window.on("resize",function(){if(v.$window.width()<992){e.addClass("on-mobile");i.addClass("on-mobile")}else{e.removeClass("on-mobile");i.removeClass("on-mobile");e.find(".catalog-toolbar-tabs__content").removeAttr("style")}}).trigger("resize");v.$body.on("click",".catalog-toolbar-tabs__title",function(e){e.preventDefault();var t=b(this),i=t.closest(".catalog-toolbar");if(i.hasClass("on-mobile")){if(i.siblings(".products-filter-dropdown").hasClass("open")){i.siblings(".products-filter-dropdown").slideUp(200).removeClass("open");i.find(".toggle-filters").removeClass("active")}setTimeout(function(){t.siblings(".catalog-toolbar-tabs__content").slideToggle(200);t.siblings(".catalog-toolbar-tabs__content").toggleClass("open");t.toggleClass("active")},200)}});v.$body.on("click",'[data-target="catalog-filters-dropdown"]',function(e){e.preventDefault();var t=b(this);toolbar=t.closest(".catalog-toolbar");t.toggleClass("active");if(toolbar.hasClass("on-mobile")){if(!i.hasClass("open")){toolbar.find(".catalog-toolbar-tabs__content").slideUp(200);toolbar.find(".catalog-toolbar-tabs__content").removeClass("open");toolbar.find(".catalog-toolbar-tabs__title").removeClass("active")}setTimeout(function(){i.slideToggle(200).toggleClass("open");t.children().toggleClass("active")},200)}});i.on("click",".widget-title",function(e){if(b(this).closest(".products-filter-dropdown").hasClass("on-mobile")){e.preventDefault();var t=b(this),i=t.closest(".widget"),o=i.siblings();if(o.hasClass("products-filter-widget")){o.find(".filter-header").next().slideUp(200);o.find(".filter").removeClass("active")}o.not(".products-filter-widget").find(".widget-title").next().slideUp(200);o.not(".products-filter-widget").removeClass("active");t.next().slideToggle(200);i.toggleClass("active")}});i.on("click",".products-filter__filter-name",function(e){if(b(this).closest(".products-filter-dropdown").hasClass("on-mobile")){e.preventDefault();var t=b(this),i=t.closest(".products-filter-widget"),o=t.closest(".products-filter__filter"),a=t.closest(".products-filter__filter").siblings(),r=i.siblings();a.find(".products-filter__filter-control").slideUp(200);r.not(".products-filter-widget").removeClass("active");a.removeClass("active");t.next().slideToggle(200);o.toggleClass("active")}})};v.productsLoading=function(){v.$body.on("click","#razzi-catalog-previous-ajax > a",function(e){e.preventDefault();var t=b(this);if(t.data("requestRunning")){return}t.data("requestRunning",true);var o=t.closest(".rz-shop-content"),a=o.find("ul.products"),r=o.find(".next-posts-navigation"),s=a.children("li.product").length,i=t.attr("href");r.addClass("loading");b.get(i,function(e){var t=b(e).find("#rz-shop-content").find("ul.products").children("li.product");for(var i=0;i<t.length;i++){b(t[i]).css("animation-delay",i*100+"ms")}t.addClass("razziFadeInUp");if(b(e).find(".next-posts-navigation").length>0){r.html(b(e).find(".next-posts-navigation").html())}else{r.fadeOut()}a.append(t);r.find(".nav-previous-ajax > a").data("requestRunning",false);s+=t.length;o.find(".razzi-posts__found .current-post").html(" "+s);v.postsFound();r.removeClass("loading");b(document.body).trigger("razzi_products_loaded",[t,true])})})};v.postsFound=function(){var e=b(".razzi-posts__found-inner"),t=e.find(".count-bar"),i=e.find(".current-post").html(),o=e.find(".found-post").html(),a=i/o*100;t.css("width",a+"%")};v.productsInfinite=function(){if(!b(".woocommerce-navigation").hasClass("ajax-infinite")){return}v.$window.on("scroll",function(){if(v.$body.find("#razzi-catalog-previous-ajax").is(":in-viewport")){v.$body.find("#razzi-catalog-previous-ajax > a").trigger("click")}}).trigger("scroll")};v.productsFilterActivated=function(){var o=b("#rz-products-filter__activated"),i=b(".products-filter-widget").find(".products-filter__activated");o.html(i.html());v.$body.on("razzi_products_filter_widget_updated",function(e,t){var i=b(t).closest(".products-filter-widget").find(".products-filter__activated");o.html(i.html())});o.on("click",".remove-filtered",function(e){var t=b(this).index();if(t!=="undefined"){b(this).remove();i.find(".remove-filtered:eq("+t+")").trigger("click")}return false})};v.scrollFilterSidebar=function(){v.$body.on("razzi_products_filter_before_send_request",function(){var e=0,t=v.$body.find(".site-header").height();if(!b("#rz-shop-content").length){return}if(v.$body.hasClass("header-sticky")){e=200}else{e=t+200}if(b(".products-filter__activated").length){e+=b(".products-filter__activated").height()}b("html,body").stop().animate({scrollTop:b("#rz-shop-content").offset().top-e},"slow");b("#rz-shop-content").find(".razzi-posts__found").hide()})};v.changeCatalogElementsFiltered=function(){v.$body.on("razzi_products_filter_request_success",function(e,t){var i=b(t),o=v.$body.find("#page-header"),a=v.$body.find("#catalog-header-banners"),r=v.$body.find("#rz-catalog-top-categories"),s=v.$body.find(".catalog-toolbar"),l=v.$body.find(".catalog-toolbar .catalog-toolbar-tabs__title"),n=v.$body.find(".rz-shop-content .razzi-posts__found"),d=v.$body.find(".widget_product_categories"),c=v.$body.find(".woocommerce-navigation"),f=v.$body.find(".catalog-sidebar");if(!o.hasClass("catalog-page-header--template")){o.replaceWith(i.find("#page-header"))}if(i.find("#catalog-header-banners").length){a.replaceWith(i.find("#catalog-header-banners"));v.catalogBanner()}if(i.find("#rz-catalog-top-categories").length){r.replaceWith(i.find("#rz-catalog-top-categories"));v.productCategoriesCarousel()}if(i.find(".catalog-toolbar").length&&!s.hasClass("layout-v2")){s.replaceWith(i.find(".catalog-toolbar"))}l.removeClass("active");if(i.find(".rz-shop-content .razzi-posts__found").length){n.replaceWith(i.find(".rz-shop-content .razzi-posts__found"));v.postsFound()}if(i.find(".widget_product_categories").length){d.replaceWith(i.find(".widget_product_categories"))}if(c.length){c.replaceWith(i.find(".woocommerce-navigation"))}else{b("#rz-shop-content").append(i.find(".woocommerce-navigation"))}if(f.length&&f.hasClass("has-collapse-hide")){if(window.location.href.indexOf("?")==-1){return}var g,p=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");for(var u=0;u<p.length;u++){g=p[u].split("=");if(g){var h=f.find(".products-filter-widget").find("[name="+g[0]+"]");h.closest(".products-filter__filter").addClass("rz-active")}}}v.stickySidebar()});v.$body.on("razzi_products_filter_before_send_request",function(e,t){if(v.$body.hasClass("razzi-filter-sidebar-off")){b(".catalog-filters-modal-opened #catalog-filters-modal").removeClass("open").fadeOut();b(".primary-sidebar-opened #primary-sidebar").removeClass("open").fadeOut();if(v.$body.hasClass("catalog-filters-modal-opened")){v.$body.removeClass("catalog-filters-modal-opened modal-opened").removeAttr("style")}if(v.$body.hasClass("primary-sidebar-opened")){v.$body.removeClass("primary-sidebar-opened modal-opened").removeAttr("style")}}})};v.stickySidebar=function(){if(!b.fn.stick_in_parent){return}var e=30;if(v.$body.hasClass("admin-bar")){e+=32}if(v.$body.hasClass("header-sticky")){if(v.$header.hasClass("header-bottom-no-sticky")&&v.$header.find(".header-main").length){e+=v.$header.find(".header-main").height()}else if(v.$header.hasClass("header-main-no-sticky")&&v.$header.find(".header-bottom").length){e+=v.$header.find(".header-bottom").height()}else{e+=v.$header.height()}}v.$window.on("resize",function(){if(v.$window.width()<992){b("#primary-sidebar.razzi-sticky-sidebar").trigger("sticky_kit:detach")}else{b("#primary-sidebar.razzi-sticky-sidebar").stick_in_parent({offset_top:e})}}).trigger("resize")};b(function(){v.init()})})(jQuery);