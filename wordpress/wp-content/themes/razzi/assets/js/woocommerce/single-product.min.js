(function(l){"use strict";var d=d||{};d.init=function(){d.$body=l(document.body),d.$window=l(window),d.$header=l("#site-header");this.relatedProductsCarousel();this.productVariation();this.singleProductV1();this.singleProductV2();this.singleProductV3();this.singleProductV4();this.singleProductV5();this.singleProductV6();this.productTabs();this.stickyATC();this.productVideo();this.productVideoPopup()};d.productThumbnails=function(o){var t=l(".woocommerce-product-gallery"),a=t.find(".flex-control-thumbs"),n=t.find(".woocommerce-product-gallery__image.razzi-product-video");t.imagesLoaded(function(){setTimeout(function(){var e=t.data("columns");a.wrap('<div class="woocommerce-product-gallery__thumbs-carousel swiper-container" style="opacity:0"></div>');a.addClass("swiper-wrapper");a.find("li").addClass("swiper-slide");a.after('<span class="razzi-svg-icon rz-thumbs-button-prev rz-swiper-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg></span>');a.after('<span class="razzi-svg-icon rz-thumbs-button-next rz-swiper-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg></span>');var r={slidesPerView:e,loop:false,autoplay:false,speed:800,watchOverflow:true,spaceBetween:15,navigation:{nextEl:".rz-thumbs-button-next",prevEl:".rz-thumbs-button-prev"},on:{init:function(){a.parent().css("opacity",1)}},breakpoints:{300:{spaceBetween:0,allowTouchMove:false},991:{spaceBetween:15}}};if(o){r.direction="vertical"}else{r.direction="horizontal"}new Swiper(a.parent(),r);l("li",a).append("<span/>");if(n.length>0){var i=l(".woocommerce-product-gallery").data("video")-1;l(".woocommerce-product-gallery").addClass("has-video");a.find("li").eq(i).append('<div class="razzi-i-video"></div>')}},200)})};d.singleProductV1=function(){var e=l("div.product.layout-v1");if(!e.length){return}d.productThumbnails(false)};d.singleProductV2=function(){var e=l("div.product.layout-v2");if(!e.length){return}d.productThumbnails(true)};d.singleProductV3=function(){var e=l("div.product.layout-v3");if(!e.length){return}if("1"===razziData.product_image_zoom){e.find(".woocommerce-product-gallery .woocommerce-product-gallery__image").each(function(){d.zoomSingleProductImage(this)})}d.responsiveProductGallery()};d.singleProductV4=function(){var e=l("div.product.layout-v4");if(!e.length){return}var r=l(".woocommerce-product-gallery"),i=r.find(".woocommerce-product-gallery__wrapper");r.imagesLoaded(function(){if(r.find(".woocommerce-product-gallery__image").length<2){return}r.addClass("swiper-container");i.addClass("swiper-wrapper");i.children().addClass("swiper-slide");i.after('<span class="razzi-svg-icon rz-swiper-button-prev rz-swiper-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg></span>');i.after('<span class="razzi-svg-icon rz-swiper-button-next rz-swiper-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg></span>');i.after('<div class="swiper-pagination"></div>');var e={loop:false,autoplay:false,speed:800,watchOverflow:true,spaceBetween:10,navigation:{nextEl:".rz-swiper-button-next",prevEl:".rz-swiper-button-prev"},pagination:{el:".swiper-pagination",type:"bullets",clickable:true},breakpoints:{0:{slidesPerView:1,slidesPerGroup:1},481:{slidesPerView:2,slidesPerGroup:1}}};new Swiper(r,e)});if("1"===razziData.product_image_zoom){e.find(".woocommerce-product-gallery .woocommerce-product-gallery__image").each(function(){d.zoomSingleProductImage(this)})}};d.singleProductV5=function(){var e=l("div.product.layout-v5");if(!e.length){return}if("1"===razziData.product_image_zoom){e.find(".woocommerce-product-gallery .woocommerce-product-gallery__image").each(function(){d.zoomSingleProductImage(this)})}d.responsiveProductGallery()};d.singleProductV6=function(){var e=l("div.product.layout-v6");if(!e.length){return}d.productThumbnails(true)};d.productTabs=function(){var e=l("div.product");if(!e.hasClass("product-tabs-under-summary")){return}var r=e.find(".woocommerce-tabs"),i=window.location.hash;if(i.toLowerCase().indexOf("comment-")>=0||i==="#reviews"||i==="#tab-reviews"){r.find(".tab-title-reviews").addClass("active");r.find(".woocommerce-Tabs-panel--reviews").show()}l(".woocommerce-review-link").on("click",function(){l(".razzi-accordion-title.tab-title-reviews").trigger("click")});r.on("click",".razzi-accordion-title",function(e){e.preventDefault();if(l(this).hasClass("active")){l(this).removeClass("active");l(this).siblings(".woocommerce-Tabs-panel").stop().slideUp(300)}else{r.find(".razzi-accordion-title").removeClass("active");r.find(".woocommerce-Tabs-panel").slideUp();l(this).addClass("active");l(this).siblings(".woocommerce-Tabs-panel").stop().slideDown(300)}})};d.relatedProductsCarousel=function(){var e=l(".products.related, .products.upsells");if(!e.length){return}var r=e.find("ul.products");r.wrap('<div class="swiper-container linked-products-carousel" style="opacity: 0;"></div>');r.after('<div class="swiper-scrollbar"></div>');r.addClass("swiper-wrapper");r.find("li.product").addClass("swiper-slide");new Swiper(e.find(".linked-products-carousel"),{loop:false,scrollbar:{el:".swiper-scrollbar",hide:false,draggable:true},on:{init:function(){this.$el.css("opacity",1)}},spaceBetween:30,breakpoints:{300:{slidesPerView:razziData.mobile_portrait==""?2:razziData.mobile_portrait,slidesPerGroup:razziData.mobile_portrait==""?2:razziData.mobile_portrait,spaceBetween:15},480:{slidesPerView:razziData.mobile_landscape==""?3:razziData.mobile_landscape,slidesPerGroup:razziData.mobile_landscape==""?3:razziData.mobile_landscape},768:{spaceBetween:20,slidesPerView:3,slidesPerGroup:3},992:{slidesPerView:3,slidesPerGroup:3},1200:{slidesPerView:4,slidesPerGroup:4}}})};d.productVariation=function(){d.$body.on("tawcvs_initialized",function(){l(".variations_form").off("tawcvs_no_matching_variations");l(".variations_form").on("tawcvs_no_matching_variations",function(e,r){e.preventDefault();l(".variations_form").find(".woocommerce-variation.single_variation").show();if(typeof wc_add_to_cart_variation_params!=="undefined"){l(".variations_form").find(".single_variation").slideDown(200).html("<p>"+wc_add_to_cart_variation_params.i18n_no_matching_variations_text+"</p>")}})});l(".variations_form").on("found_variation.wc-variation-form",function(e,r){var i=l(".div.product").find(".sku_wrapper .sku");if(typeof i.wc_set_content!=="function"){return}if(typeof i.wc_reset_content!=="function"){return}if(r.sku){i.wc_set_content(r.sku)}else{i.wc_reset_content()}})};d.zoomSingleProductImage=function(e){if(typeof wc_single_product_params=="undefined"||!l.fn.zoom){return}var r=l(e),o=r.width(),t=false;r.each(function(e,r){var i=l(r).find("img");if(i.data("large_image_width")>o){t=true;return false}});if(t){var i=l.extend({touch:false},wc_single_product_params.zoom_options);if("ontouchstart"in document.documentElement){i.on="click"}r.trigger("zoom.destroy");r.zoom(i)}};d.responsiveProductGallery=function(){if(typeof razziData.product_gallery_slider==="undefined"){return}if(razziData.product_gallery_slider||!l.fn.wc_product_gallery){return}var e=l(window),r=l(".woocommerce div.product"),i=false,o={};if(!r.length){return}var t=l(".woocommerce-product-gallery",r),a=t.clone(),n=t.find(".woocommerce-product-gallery__image.razzi-product-video"),s=false;a.children(".woocommerce-product-gallery__trigger").remove();a.off();if(typeof wc_single_product_params!==undefined){i=wc_single_product_params.flexslider_enabled;o=wc_single_product_params.flexslider}c();e.on("resize",c);function c(){if(e.width()>=992){if(!s){return}if(typeof wc_single_product_params!==undefined){wc_single_product_params.flexslider_enabled=i;wc_single_product_params.flexslider=o}t.replaceWith(a.clone());t=l(".woocommerce-product-gallery",r);t.each(function(){l(this).wc_product_gallery()});l("form.variations_form select",r).trigger("change");if("1"===razziData.product_image_zoom&&r.hasClass("layout-v3","layout-v5")){t.find(".woocommerce-product-gallery__image").each(function(){d.zoomSingleProductImage(this)})}s=false}else{if(s){return}if(typeof wc_single_product_params!==undefined){wc_single_product_params.flexslider_enabled=true;wc_single_product_params.flexslider.controlNav=true}t.replaceWith(a.clone());t=l(".woocommerce-product-gallery",r);setTimeout(function(){t.each(function(){l(this).wc_product_gallery()})},100);l("form.variations_form select",r).trigger("change");s=true;if(n.length>0){l(".woocommerce-product-gallery").addClass("has-video")}}}};d.stickyATC=function(){var r=l("#razzi-sticky-add-to-cart"),e=r.find(".razzi-sticky-add-to-cart__content-button");if(!r.length){return}if(!l("div.product .entry-summary .cart").length){return}var i=0,o;if(d.$body.hasClass("admin-bar")){i+=32}var t=r.hasClass("razzi-sticky-atc_top")?true:false;function a(){o=l(".entry-summary .cart").offset().top+l(".entry-summary .cart").outerHeight()-i;if(window.pageYOffset>o){r.addClass("open");if(d.$body.hasClass("header-sticky")&&t){d.$body.find(".site-header").addClass("rz-header_sticky-act-active")}}else{r.removeClass("open");d.$body.find(".site-header").removeClass("rz-header_sticky-act-active")}if(!t){var e=document.body.scrollHeight;if(window.pageYOffset>e-window.innerHeight){r.removeClass("open")}}}d.$window.on("scroll",function(){a()}).trigger("scroll");if(!e.hasClass("ajax_add_to_cart")){e.on("click",function(e){e.preventDefault();l("html,body").stop().animate({scrollTop:l(".entry-summary").offset().top},"slow")})}};d.productVideo=function(){var o=l(".woocommerce-product-gallery");var e=o.find(".woocommerce-product-gallery__image.razzi-product-video");var r=o.find(".flex-control-thumbs");if(e.length<1){return}r.on("click","li",function(){var e=o.find(".razzi-product-video");var r=e.find("iframe"),i=e.find("video.wp-video-shortcode");if(r.length>0){r.attr("src",r.attr("src"))}if(i.length>0){i[0].pause()}return false});e.find(".video-vimeo > iframe").attr("width","100%").attr("height",500);r.find("li").on("click",".razzi-i-video",function(e){e.preventDefault();l(this).closest("li").find("img").trigger("click")})};d.productVideoPopup=function(){var e=l(".woocommerce-product-gallery").find(".razzi-product-video--icon");if(e.length<1){return}var r={type:"iframe",mainClass:"mfp-fade",removalDelay:300,preloader:false,fixedContentPos:false,iframe:{markup:'<div class="mfp-iframe-scaler">'+'<div class="mfp-close"></div>'+'<iframe class="mfp-iframe" frameborder="0" allow="autoplay"></iframe>'+"</div>",patterns:{youtube:{index:"youtube.com/",id:"v=",src:"https://www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"}},srcAction:"iframe_src"}};e.magnificPopup(r)};l(function(){d.init()})})(jQuery);